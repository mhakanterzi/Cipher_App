<Window x:Class="CipherApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:CipherApp"
        xmlns:vm="clr-namespace:CipherApp.ViewModels"
        mc:Ignorable="d"
        Title="Åžifreleme AtÃ¶lyesi" Height="600" Width="1000" Background="#0F172A">
    <Window.Resources>
        <LinearGradientBrush x:Key="HeaderGradient" StartPoint="0,0" EndPoint="1,0">
            <GradientStop Color="#3B82F6" Offset="0"/>
            <GradientStop Color="#8B5CF6" Offset="1"/>
        </LinearGradientBrush>
        <Style x:Key="AccentButton" TargetType="Button">
            <Setter Property="Background" Value="#0B1220"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="BorderBrush" Value="#374151"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleX="1" ScaleY="1"/>
                </Setter.Value>
            </Setter>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect BlurRadius="12" ShadowDepth="0" Color="#66000000"/>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#111827"/>
                    <Setter Property="RenderTransform">
                        <Setter.Value>
                            <ScaleTransform ScaleX="1.03" ScaleY="1.03"/>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>
        <Style x:Key="DarkTextBox" TargetType="TextBox">
            <Setter Property="Background" Value="#0B1220"/>
            <Setter Property="Foreground" Value="#E5E7EB"/>
            <Setter Property="BorderBrush" Value="#374151"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="8,6"/>
        </Style>
        <Style x:Key="Card" TargetType="Border">
            <Setter Property="Background" Value="#111827"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect BlurRadius="20" ShadowDepth="0" Opacity="0.2"/>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <Window.DataContext>
        <vm:MainViewModel />
    </Window.DataContext>
    <Grid Margin="0">
        <Grid.RowDefinitions>
            <RowDefinition Height="100"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Grid Grid.Row="0" Background="#0F172A">
            <Rectangle Fill="{StaticResource HeaderGradient}" Opacity="0.25"/>
            <StackPanel Orientation="Horizontal" Margin="16" VerticalAlignment="Center">
                <TextBlock Text="ðŸ”" FontSize="32" Margin="0,0,8,0"/>
                <StackPanel>
                    <TextBlock Text="Åžifreleme AtÃ¶lyesi" FontSize="24" FontWeight="Bold" Foreground="#F9FAFB"/>
                    <TextBlock Text="Klasik ÅŸifreler, kolay kullanÄ±m, adÄ±m adÄ±m anlatÄ±m" Foreground="#9CA3AF"/>
                </StackPanel>
            </StackPanel>
        </Grid>

        <!-- Body -->
        <Grid Grid.Row="1" Margin="16">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="260"/>
            <ColumnDefinition Width="16"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Sidebar -->
        <Border Background="#111827" CornerRadius="12" Padding="12" >
            <StackPanel>
                <TextBlock Text="Åžifreler" Foreground="#E5E7EB" FontSize="18" FontWeight="Bold"/>
                <ListBox x:Name="CipherListBox" ItemsSource="{Binding CipherList}" SelectedItem="{Binding SelectedCipher}" Margin="0,8,0,0"
                         Background="#0B1220" BorderBrush="#0B1220" Foreground="#E5E7EB">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Name}" Padding="8"/>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>

                <Separator Margin="0,12"/>
                <Button Content="Yeni Soru" Command="{Binding NewQuizCommand}" Background="#22C55E" Foreground="White" Padding="8"/>
            </StackPanel>
        </Border>

        <!-- Spacer -->
        <Grid Grid.Column="1"/>

        <!-- Content -->
        <Border x:Name="ContentPanel" Grid.Column="2" Style="{StaticResource Card}" Opacity="0.0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <TextBlock Text="{Binding SelectedCipher.Name}" FontSize="22" FontWeight="Bold" Foreground="#F9FAFB"/>

                <TabControl Grid.Row="1" Background="#111827" BorderBrush="#111827">
                    <!-- AtÃ¶lye Tab -->
                    <TabItem Header="AtÃ¶lye">
                        <Grid Margin="8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Margin="0,0,12,0">
                                <TextBlock Text="AÃ§Ä±klama" Foreground="#9CA3AF"/>
                                <TextBlock TextWrapping="Wrap" Foreground="#D1D5DB" Margin="0,4,0,12" Text="{Binding Explanation}"/>

                                <TextBlock Text="Anahtar" Foreground="#9CA3AF"/>
                                <TextBox Style="{StaticResource DarkTextBox}" Text="{Binding KeyInput, UpdateSourceTrigger=PropertyChanged}"/>
                                <TextBlock Foreground="#6B7280" FontSize="12" Margin="0,2,0,12" Text="{Binding KeyHint}"/>

                                <TextBlock Text="Girdi" Foreground="#9CA3AF"/>
                                <TextBox Style="{StaticResource DarkTextBox}" Text="{Binding Plaintext, UpdateSourceTrigger=PropertyChanged}" AcceptsReturn="True" Height="140"/>

                                <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                                    <Button Content="Åžifrele" Command="{Binding EncryptCommand}" Style="{StaticResource AccentButton}" Background="#3B82F6" Margin="0,0,8,0"/>
                                    <Button Content="Ã‡Ã¶z" Command="{Binding DecryptCommand}" Style="{StaticResource AccentButton}" Background="#8B5CF6"/>
                                </StackPanel>
                            </StackPanel>

                            <StackPanel Grid.Column="1">
                                <TextBlock Text="Ã‡Ä±ktÄ±" Foreground="#9CA3AF"/>
                                <Border Style="{StaticResource Card}" Background="#0B1220" Padding="8">
                                    <TextBox Text="{Binding Output}" AcceptsReturn="True" Background="#0B1220" Foreground="#F9FAFB" BorderThickness="0"/>
                                </Border>
                            </StackPanel>
                        </Grid>
                    </TabItem>

                    <!-- AdÄ±m AdÄ±m Tab -->
                    <TabItem Header="AdÄ±m AdÄ±m">
                        <Grid Margin="8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="2*"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Margin="0,0,12,0">
                                <TextBlock Text="Anahtar" Foreground="#9CA3AF"/>
                                <TextBox Style="{StaticResource DarkTextBox}" Text="{Binding KeyInput, UpdateSourceTrigger=PropertyChanged}"/>
                                <TextBlock Foreground="#6B7280" FontSize="12" Margin="0,2,0,12" Text="{Binding KeyHint}"/>
                                <TextBlock Text="Metin" Foreground="#9CA3AF"/>
                                <TextBox Style="{StaticResource DarkTextBox}" Text="{Binding Plaintext, UpdateSourceTrigger=PropertyChanged}" AcceptsReturn="True" Height="120"/>

                                <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                                    <Button Content="Åžifreleme AdÄ±mlarÄ±" Command="{Binding GenerateEncryptStepsCommand}" Style="{StaticResource AccentButton}" Background="#3B82F6" Margin="0,0,8,0"/>
                                    <Button Content="Ã‡Ã¶zme AdÄ±mlarÄ±" Command="{Binding GenerateDecryptStepsCommand}" Style="{StaticResource AccentButton}" Background="#8B5CF6"/>
                                </StackPanel>

                                <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                                    <Button Content="Ä°leri" Command="{Binding NextStepCommand}" Style="{StaticResource AccentButton}"/>
                                    <Button Content="SÄ±fÄ±rla" Command="{Binding ResetStepsCommand}" Style="{StaticResource AccentButton}" Margin="8,0,0,0"/>
                                </StackPanel>
                            </StackPanel>

                            <ScrollViewer Grid.Column="1">
                                <ItemsControl ItemsSource="{Binding Steps}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border Background="#0B1220" CornerRadius="8" Padding="10" Margin="0,0,0,8">
                                                <Border.Triggers>
                                                    <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                                                        <BeginStoryboard>
                                                            <Storyboard>
                                                                <DoubleAnimation Storyboard.TargetProperty="Opacity" From="0" To="1" Duration="0:0:0.25"/>
                                                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)" From="8" To="0" Duration="0:0:0.25"/>
                                                            </Storyboard>
                                                        </BeginStoryboard>
                                                    </EventTrigger>
                                                </Border.Triggers>
                                                <Border.RenderTransform>
                                                    <TranslateTransform Y="0"/>
                                                </Border.RenderTransform>
                                                <TextBlock>
                                                    <Run Text="AdÄ±m "/><Run Text="{Binding Index}"/><Run Text=": "/><Run Text="{Binding Text}"/>
                                                </TextBlock>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </ScrollViewer>
                        </Grid>
                    </TabItem>

                    <!-- Soru Tab -->
                    <TabItem Header="Soru">
                        <Grid Margin="8">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                <Button Content="Yeni Soru" Command="{Binding NewQuizCommand}" Style="{StaticResource AccentButton}" Background="#22C55E"/>
                                <Button Content="CevabÄ± GÃ¶ster" Command="{Binding ShowAnswerCommand}" Style="{StaticResource AccentButton}" Background="#EF4444" Margin="8,0,0,0"/>
                            </StackPanel>
                            <Border Style="{StaticResource Card}" Grid.Row="1">
                                <StackPanel>
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                        <TextBlock Text="Åžifre:" Foreground="#9CA3AF"/>
                                        <TextBlock Text="{Binding CurrentQuestion.CipherName}" Foreground="#D1D5DB" Margin="6,0,0,0"/>
                                    </StackPanel>
                                    <TextBlock Text="Åžifreli Metin" Foreground="#9CA3AF"/>
                                    <TextBlock Text="{Binding CurrentQuestion.Ciphertext}" TextWrapping="Wrap" Foreground="#FDE68A"/>
                                </StackPanel>
                            </Border>
                        </Grid>
                    </TabItem>
                </TabControl>
            </Grid>
        </Border>
        </Grid>
    </Grid>
</Window>
